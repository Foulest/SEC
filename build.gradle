plugins {
    id 'java'
    id 'application'
}

group = 'net.foulest'
version = '1.0.0'
description = 'SEC: Search Engine Crawler'

repositories {
    mavenCentral()
    mavenLocal()

    flatDir {
        dirs 'libs'
    }
}

configurations {
    provided
    implementation.extendsFrom(provided)
}

dependencies {
    // https://mvnrepository.com/artifact/com.google.code.gson/gson
    implementation group: 'com.google.code.gson', name: 'gson', version: '2.10'

    // https://github.com/serpapi/google-search-results-java
    // For some reason, the jitpack repository doesn't work, so it's stored locally.
    implementation group: 'serpapi', name: 'google-search-results-java', version: '2.0.3'

    implementation group: 'org.projectlombok', name: 'lombok', version: '1.18.24'
    annotationProcessor group: 'org.projectlombok', name: 'lombok', version: '1.18.24'
}

jar {
    duplicatesStrategy = DuplicatesStrategy.INCLUDE

    manifest {
        attributes 'Main-Class': 'net.foulest.sec.SEC'
    }

    from {
        configurations.provided.asFileTree.files.collect {
            zipTree(it)
        }
    }
}
